<!DOCTYPE html> 
<html lang="nl">
<head>
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../assets/css/calc.css">
    <meta charset="UTF-8">
    <title>Revoloop Credit Calculator</title>
</head>

<style>
    body {
      font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
      background: #f5fff5;
      text-align: center;
      padding: 2rem;
    }

    form {
      max-width: 400px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.85);
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 1rem;
    }

    input, select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-top: 0.3rem;
    }

    button {
      margin-top: 1rem;
      background-color: #228B22;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #006400;
    }

    #log {
      margin-top: 2rem;
      background: rgba(255, 255, 255, 0.7);
      padding: 1rem;
      border-radius: 10px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      overflow-x: auto;
    }

    #log table {
      width: 100%;
      border-collapse: collapse;
    }

    #log th, #log td {
      border-bottom: 1px solid #ccc;
      padding: 0.5rem;
    }

    #log th {
      background: rgba(0, 100, 0, 0.1);
      color: #006400;
    }
</style>

<body>

<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="shop.html">Winkel</a></li>
      <li><a href="about.html">Over Ons</a></li>
      <li><a href="services.html">Diensten</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <div class="translate-btn">
      <button onclick="location.href='../english/calc.html'">üåê NL / EN</button>
  </div>
</header>

<section id="pla-calculator">
  <h2>Bereken je winkeltegoed</h2>
  <p>Lever je PLA-afval in en zie direct hoeveel winkeltegoed je ontvangt.</p>

  <form id="calc-form">
    <label for="email">E-mailadres (optioneel)</label>
    <input id="email" type="email" placeholder="jij@voorbeeld.com" />

    <label for="weight">Aantal kilogram PLA dat je inlevert</label>
    <input id="weight" type="number" min="0" step="0.01" value="1" required />

    <label for="quality">Conditie van het materiaal</label>
    <select id="quality">
      <option value="0.20">Gemengd / vervuild (laagste waarde - ‚Ç¨0,20/kg)</option>
      <option value="0.50" selected>Rein (gemiddeld - ‚Ç¨0,50/kg)</option>
      <option value="1.00">Gesorteerd & schoon (hoogste waarde - ‚Ç¨1,00/kg)</option>
    </select>

    <label for="customer">Type klant</label>
    <select id="customer">
        <option value="Individu" selected>Individu</option>
        <option value="Makerspace">Makerspace</option>
        <option value="Overig">Overig</option>
    </select>

    <button type="button" id="calc">Bereken winkeltegoed</button>
  </form>

  <div id="result" style="display:none; margin-top:1.5rem;">
    <h3>Je ontvangt:</h3>
    <p id="credit" style="font-size:1.5rem; font-weight:700; color:#006400;">‚Ç¨ 0,00</p>
    <p id="note" style="color:#333;">‚Äî</p>
  </div>
</section>

<section id="log">
  <h3>Berekeninggeschiedenis</h3>
  <table>
    <thead>
      <tr>
        <th>E-mail</th>
        <th>Klanttype</th>
        <th>Kilogram</th>
        <th>Conditie</th>
        <th>Winkeltegoed</th>
        <th>Datum</th>
      </tr>
    </thead>
    <tbody id="log-body">
      <!-- Rijen worden via JavaScript geladen -->
    </tbody>
  </table>
</section>

<script>
const el = id => document.getElementById(id);
const fmt = v => Number.isFinite(v)
  ? v.toLocaleString('nl-NL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })
  : '‚Äî';

const fakeData = [
  { email: "John.Pork@voorbeeld.com", customer: "Individu", weight: 25, quality: 0.50, credit: 25*0.50*1.2, date: "2025-11-10" },
  { email: "Tim.Cheese@voorbeeld.com", customer: "Makerspace", weight: 18, quality: 1.00, credit: 18*1.00*1.2, date: "2025-11-08" },
  { email: "Kippen.Rijder@voorbeeld.com", customer: "Overig", weight: 32, quality: 0.20, credit: 32*0.20*1.2, date: "2025-11-07" },
  { email: "Hooog.Riddaahh@voorbeeld.com", customer: "Makerspace", weight: 12, quality: 0.50, credit: 12*0.50*1.2, date: "2025-11-05" },
  { email: "Absolute.Bioscoop@voorbeeld.com", customer: "Individu", weight: 40, quality: 1.00, credit: 40*1.00*1.2, date: "2025-11-01" }
];

function loadLog() {
  const log = JSON.parse(localStorage.getItem('revoloopLog') || '[]');
  const tbody = el('log-body');
  tbody.innerHTML = '';

  // 1Ô∏è‚É£ Nieuwe berekeningen bovenaan
  log.forEach(entry => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${entry.email || '‚Äî'}</td>
      <td>${entry.customer}</td>
      <td>${entry.weight} kg</td>
      <td>‚Ç¨${fmt(entry.quality)}/kg</td>
      <td>‚Ç¨${fmt(entry.credit)}</td>
      <td>${entry.date}</td>
    `;
    tbody.appendChild(row);
  });

  // 2Ô∏è‚É£ Fake data onderaan
  fakeData.forEach(entry => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${entry.email}</td>
      <td>${entry.customer}</td>
      <td>${entry.weight} kg</td>
      <td>‚Ç¨${fmt(entry.quality)}/kg</td>
      <td>‚Ç¨${fmt(entry.credit)}</td>
      <td>${entry.date}</td>
    `;
    tbody.appendChild(row);
  });
}

function saveLog(entry) {
  const log = JSON.parse(localStorage.getItem('revoloopLog') || '[]');
  log.unshift(entry); // nieuwste bovenaan
  localStorage.setItem('revoloopLog', JSON.stringify(log));
}

function calculate() {
  const weight = parseFloat(el('weight').value) || 0;
  const value = parseFloat(el('quality').value) || 0;
  const customer = el('customer').value || 'Individu';
  const factor = 1.2;
  const credit = weight * value * factor;
  const email = el('email').value.trim();
  const date = new Date().toLocaleString('nl-NL');

  // resultaat updaten
  el('credit').textContent = '‚Ç¨ ' + fmt(credit);
  el('note').textContent = `${weight.toFixed(2)} kg √ó ‚Ç¨${value.toFixed(2)}/kg √ó 1,2 incentive`;
  el('result').style.display = 'block';

  const entry = { email, weight, quality: value, credit, customer, date };
  saveLog(entry);
  loadLog();
}

// Event listener
el('calc').addEventListener('click', () => {
  calculate();
  el('credit').animate([{ transform: 'scale(1.05)' }, { transform: 'scale(1)' }], { duration: 250 });
});

// Initial load
loadLog();
</script>

</body>
</html>
